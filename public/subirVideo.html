<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Coronavirus</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Hind">
    <link rel="stylesheet" href="assets/css/Footer-Basic.css">
    <link rel="stylesheet" href="assets/css/styles.css">
    <script src="javascripts/RecordRTC.js"></script>
    <script src="javascripts/webcamRecord.js"></script>
</head>

<body>
    <nav class="navbar navbar-light navbar-expand-md">
        <div class="container-fluid"><a class="navbar-brand" href="#" style="font-family: Hind, sans-serif;font-style: normal;">bio-bot</a><button data-toggle="collapse" class="navbar-toggler" data-target="#navcol-1"><span class="sr-only">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
            <div
                class="collapse navbar-collapse" id="navcol-1">
                <ul class="nav navbar-nav">
                    <li class="nav-item" role="presentation" id="desktopBrand"><a class="nav-link active" href="#">bio-bot</a></li>
                    <li class="nav-item" role="presentation"><a class="nav-link" href="#TEMP.html">archivos</a></li>
                    <li class="nav-item" role="presentation"><a class="nav-link" href="#TEMP.html">texto</a></li>
                </ul>
        </div>
        </div>
    </nav>
    <p id="rightZIndex">Vos:</p>
    <p id="leftZIndex">Mundo:</p><div id="video"> <h4 class="card-title">graba tu ventana</h4>
            <p style="margin-left: 7%;margin-right: 7%;">Seleccionar video para subir, luego llenar la información y presionar "subir."</p>
    <form style="background-color: rgb(228,228,228);" action="/upload" method="POST" enctype="multipart/form-data" id="form">
        <p>&nbsp;&nbsp;</p>
        <input class="text" name="user" id="user" value="" style="" placeholder="nombre">
        <input class="text" name="email" id="email" value="" placeholder="email">
        <input class="text" name="emailVerif" id="emailVerif" value="" placeholder="verificar email"><br />
        <input class="hidden" name="coords" id="coords" value='{"lat":999,"long":999}' style="display:none;">
        <div class="form-group"><input type="file" style="margin-left: 5%;" name="video"></div>
        <button id="toSubmit" class="btn btn-primary" type="button" style="background-color: rgb(0,0,0);margin-left: 5%;">Subir</button>
        <p>&nbsp;&nbsp;</p>
    </form>
    <p class="footer-basic"></p>
    <hr>
    <div class="footer-basic">
        <footer><a href="#">nosotros</a><div></div><a href="#">aviso de privacidad</a></footer>
    </div>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/typing.js"></script>
    <script>
        function upload(){
            text1 = $("#user").val();
            text2 = $("#email").val();
            text3 = $("#emailVerif").val();

            if(text1.length == 0 || text2.length == 0){
                alert("Los datos no están llenos. Llena los datos y luego vuelve a presionar el boton subir");
                return;
            }
            if(text2 != text3){
                alert("La casilla de email y su verificación es distinta. Asegurate que tu email esté correctamente escrito");
                return;
            }

            $("#form").submit();
        }
        $(document).ready(() => {
            if(navigator.geolocation){
                navigator.geolocation.getCurrentPosition((position) => {
                    coords = position.coords;
                    changedCoords = {longitude: coords.longitude, latitude: coords.latitude};
                    console.log(JSON.stringify(changedCoords));
                    $("#coords").attr("value", JSON.stringify(changedCoords));
                });
            }
            $("#toSubmit").click(upload);
        });
    </script>
</body>

</html>